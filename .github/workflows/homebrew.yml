name: Homebrew Bump Formula
on:
  workflow_dispatch:
  # Not all binaries will be available at the moment when release is published.
  # release:
  #   types: [published]
jobs:
  homebrew:
    runs-on: ubuntu-latest
    steps:
    - name: Get Latest Tag
      id: ltag
      run: echo "GIT_TAG=$(git describe --tags --abbrev=0)" >> "$GITHUB_OUTPUT"

    - name: Bump Homebrew Formula
      uses: mislav/bump-homebrew-formula-action@v3
      env:
        COMMITTER_TOKEN: ${{ secrets.HOMEBREW_GITHUB_API_TOKEN }}
      with:
        homebrew-tap: AmmarAbouZor/homebrew-tui-journal
        formula-name: tui-journal
        formula-path: Formula/tui-journal.rb
        tag-name: ${{ steps.ltag.outputs.GIT_TAG }}
